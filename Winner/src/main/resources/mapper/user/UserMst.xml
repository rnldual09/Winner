<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.Winner.mapper.UserMapper">
	
	<select id="getUserList" resultType="CustomMap" parameterType="Map">
		SELECT USR_ID
			 , USR_NM
			 , PROFILE 
		FROM USRMST
		WHERE USR_ID LIKE CONCAT(#{userInfo},'%') OR USR_NM LIKE CONCAT('%',#{userInfo},'%')
		ORDER BY USR_NM
		LIMIT ${limit}, 3
	</select>
	
	<select id="getMateList" resultType="CustomMap" parameterType="Map">
		SELECT M.MATE_ID, U.USR_NM MATE_NM
		FROM MATELIST M
			LEFT OUTER JOIN USRMST U
				ON M.MATE_ID = U.USR_ID
		WHERE M.USR_ID = #{usrId}
			AND M.ACCEPT_YN = 'Y'
			AND M.DEL_YN = 'N'
			<if test="mateId != null and !mateId eq ''.toString()">
				AND (M.MATE_ID LIKE CONCAT(#{mateId},'%') OR U.USR_NM LIKE CONCAT('%',#{mateId},'%')
			</if>
		ORDER BY U.USR_NM
	</select>
	
</mapper>